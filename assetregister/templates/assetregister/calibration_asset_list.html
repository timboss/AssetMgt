{% extends 'assetregister/base.html' %}

{% block content %}

<ul class="breadcrumb">
  <li><a href="/">Home</a></li>
  <li><a href="{% url 'calibration_list' %}">Calibration</a></li>
  <li class="active">Assets</li>
</ul>

    <div class="SubHeading">
        <p><b>All Assets Requiring Calibration</b></p>
    </div>

    <div class="count">
        Out of the <b>{{ asset_count }}</b> total assets <b>{{ calibrated_asset_count }}</b> require calibration, of which <b>{{ active_calibrated_asset_count }}</b> are currently active.
    	<br /><a href="{% url 'calibrated_asset_list_active' %}">View "Active" assets requring calibration only</a>
    </div>

    {% for asset in assets %}
        <div class="asset">
            
            <a href="{% url 'asset_detail' pk=asset.pk %}"><h3>{{ asset.asset_description }}</h3></a>
                    
            {% if asset.asset_image_thumbnail %}
                <p><a href="{% url 'asset_detail' pk=asset.pk %}"><img src="/media/{{ asset.asset_image_thumbnail }}"></a></p>
            {% endif %}
            
            <p>Asset ID: {{ asset.asset_id }}
            {% if asset.asset_manufacturer %}
                Manufacturer: {{ asset.asset_manufacturer }}</p>
            {% endif %}
            
            <p>Asset Status: {{ asset.asset_status }}</p>
            
            {% if asset.requires_calibration %}
                <p>Last Calibrated: {{ asset.calibration_date_prev }}
                <br />Result:
              	{% if asset.passed_calibration == True %}
              		<span = class="glyphicon glyphicon-ok gi-1"></span>
              	{% else %}
              		<span = class="glyphicon glyphicon-remove gi-1"></span>
              	{% endif %}
                <br />Next Calibration Due: {{ asset.calibration_date_next }} </p>           
                
                {% if asset.calibration_instructions %}
                    <p><a href="/media/{{ asset.calibration_instructions }}">Download Calibration Instructions</a></p>
                {% endif %}    
                      
            {% endif %}
           <hr> 
        </div>
    {% endfor %}
    
    <div class="pagination">
		{% if assets.paginator.count %}
		    Showing {{ assets.object_list|length }} of {{ assets.paginator.count }} Results on Page {{ assets.number }} of {{ assets.paginator.num_pages }}
		    <br />
		{% endif %}
		
		{% if assets.has_previous or assets.has_next %}
			<ul class="pager">
				{% if assets.has_previous %}
					<li class="previous"><a href="?page={{ assets.previous_page_number }}">&laquo; Previous</a></li>
				{% else %}
					<li class="previous disabled"><a href="">&laquo; Previous</a></li>
				{% endif %}
				
				{% if assets.has_next %}
					<li class="next"><a href="?page={{ assets.next_page_number }}">Next &raquo;</a></li>
				{% else %}
					<li class="next disabled"><a href="">Next &raquo;</a></li>
				{% endif %}
			</ul>
		{% endif %}
	</div>
    
{% endblock %}